<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="今はどんなプログラミング言語を選んでもできることはあまり違わなく、まさに好みで選んでもいいと思えるくらいの時代となっていると思います。特に、"><title>色々な言語でやってみた（ソート編）</title><link rel=canonical href=https://retheviper.github.io/posts/languages-comparsion-sorting/><link rel=stylesheet href=/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css><meta property="og:title" content="色々な言語でやってみた（ソート編）"><meta property="og:description" content="今はどんなプログラミング言語を選んでもできることはあまり違わなく、まさに好みで選んでもいいと思えるくらいの時代となっていると思います。特に、"><meta property="og:url" content="https://retheviper.github.io/posts/languages-comparsion-sorting/"><meta property="og:site_name" content="Korean-man in Tokyo"><meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:tag" content="kotlin"><meta property="article:tag" content="java"><meta property="article:tag" content="javascript"><meta property="article:tag" content="python"><meta property="article:tag" content="swift"><meta property="article:tag" content="go"><meta property="article:published_time" content="2021-11-10T00:00:00+00:00"><meta property="article:modified_time" content="2021-11-10T00:00:00+00:00"><meta property="og:image" content="https://retheviper.github.io/images/magic.jpg"><meta name=twitter:title content="色々な言語でやってみた（ソート編）"><meta name=twitter:description content="今はどんなプログラミング言語を選んでもできることはあまり違わなく、まさに好みで選んでもいいと思えるくらいの時代となっていると思います。特に、"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://retheviper.github.io/images/magic.jpg"><link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png><link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png><link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png><link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png><link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png><link rel=manifest href=/favicon/manifest.json><meta name=msapplication-TileColor content="#ffffff"><meta name=msapplication-TileImage content="/favicon/ms-icon-144x144.png"><meta name=theme-color content="#ffffff"><script async src="https://www.googletagmanager.com/gtag/js?id=G-BYJBEJB6DX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-BYJBEJB6DX",{anonymize_ip:!1})}</script></head><body class="article-page has-toc"><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex
extended"><div id=article-toolbar><a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/posts/languages-comparsion-sorting/><img src=/../../images/magic.jpg loading=lazy alt="Featured image of post 色々な言語でやってみた（ソート編）"></a></div><div class=article-details><header class=article-category><a href=/categories/languages/ style=background-color:#2a9d8f;color:#fff>languages</a></header><h2 class=article-title><a href=/posts/languages-comparsion-sorting/>色々な言語でやってみた（ソート編）</a></h2><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Nov 10, 2021</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>13 minute read</time></div></footer></div></header><section class=article-content><p>今はどんなプログラミング言語を選んでもできることはあまり違わなく、まさに好みで選んでもいいと思えるくらいの時代となっていると思います。特に、<a class=link href=https://kotlinlang.org/docs/js-overview.html target=_blank rel=noopener>Kotlin/JS</a>のようなトランスパイラーやFlutterのようなフレームワークも続々と登場している時代なので、こういう傾向はこれからもどんどん加速していくのではないかと思います。</p><p>しかしそのような変化がある一方で、今現在はプログラマに一人が扱えるプログラミング言語の数に対する要求も増えいている状況ではないかと思います。実際の業務ではさまざまな理由で使われる言語が決まっていて、自分が今まで触ったことのないものでも使えるようになる必要があり、一人のエンジニアが固定されたポジションでなく、さまざまな分野にかけて実装を行うケースもありますしね。いわゆる<a class=link href=https://en.wikipedia.org/wiki/Polyglot_%28computing%29 target=_blank rel=noopener>Polyglot</a>の時代とも言えます。</p><p>なので、少なくともいろいろな言語の特徴を把握しておくということが大事になっているのではないかと思います。そして、そのような必要によるものでなくても、自分が普段接してない言語のコンセプトに触れてみることで、メインとなる言語への理解が深まることもあるのではないのかなと思ったりもします。これはどんな言語でもできることはあまり変わらないということともある意味通じているのですが、他の言語のコンセプトを受け入れた新しいAPIや機能を導入したり、そのようなライブラリが登場する場合もあるので。</p><p>さて、前置きが長くなりましたが、ということで、これからはたまにとある操作をするときにいろいろな言語ではどうやってできるのか、そしてそうした場合の特徴などを簡単に比べてみたいと思います。今回は、配列のソートになります。</p><h2 id=javascript>JavaScript</h2><p>JavaScriptでは<a class=link href=https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort target=_blank rel=noopener>Array.prototype.sort()</a>で配列のソートができます。なので、以下のようなコードを使えます。シンプルですね。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>const</span> a <span style=color:#ff79c6>=</span> [<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt;</span> a.sort()
</span></span><span style=display:flex><span>[ <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>5000</span> ]
</span></span></code></pre></div><p>また、元の配列の値は変更せず、新しくソートされた配列を作りたい場合は以下の方法を使えます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>const</span> a <span style=color:#ff79c6>=</span> [<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>const</span> b <span style=color:#ff79c6>=</span> [...a].sort() <span style=color:#6272a4>// aをコピーしてソート
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#ff79c6>&gt;</span> console.log(b)
</span></span><span style=display:flex><span>[ <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>5000</span> ]
</span></span></code></pre></div><p>ただ、ここで気づいた方もいらっしゃると思いますが、ソートされた値が期待通りにはなっていません。本当なら、<code>1, 22, 44, 300, 5000</code>になるのが普通でしょう。ここで昇順に値をソートしたい場合は、ソートの方法を自前で作成する必要があります。例えば以下のような方法がありますね。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>const</span> a <span style=color:#ff79c6>=</span> [<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt;</span> a.sort((a, b) =&gt; a <span style=color:#ff79c6>-</span> b)
</span></span><span style=display:flex><span>[ <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span> ]
</span></span></code></pre></div><p>この<code>sort()</code>では、引数として渡す<code>compareFunction</code>（引数が二つ、戻り値はnumber）の戻り値の結果によって、以下のことが起こります。</p><ul><li>0より小さいと、aのインデックスをbの先に置く</li><li>0だと、aとbは変更しない</li><li>0より大きいと、bのインデックスをaの先に置く</li></ul><p>これはJavaをやっていた方だと、<a class=link href=https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html target=_blank rel=noopener>Comparator</a>と同じだなとすぐわかる内容ですね。アロー関数の形もJavaのLambdaに似ているので、あまり違和感なく適応できるかと思います。かなりシンプルなのですが、number型の配列に対しては自前の<code>compareFunction</code>が必要となるということは大事なので、気を付ける必要はあるでしょう。</p><p>配列のインデックスを反転したい場合は、<a class=link href=https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse target=_blank rel=noopener>Array.prototype.reverse()</a>を使うだけで良いです。この場合はnumberの配列でも自前の<code>compareFunction</code>が必要ないので、便利ですね。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#ff79c6>&gt;</span> <span style=color:#ff79c6>const</span> a <span style=color:#ff79c6>=</span> [<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt;</span> a.reverse()
</span></span><span style=display:flex><span>[ <span style=color:#bd93f9>5000</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>22</span> ]
</span></span></code></pre></div><h2 id=java>Java</h2><p>では、次にJavaの方も見ていきましょう。先に述べた通り、<code>Comparator</code>を使うと簡単にソートの方法を実装できるので、基本的には同じです。ただ、Javaの場合だとそもそも<a class=link href=https://docs.oracle.com/javase/8/docs/api/java/util/List.html#sort-java.util.Comparator- target=_blank rel=noopener>List.sort()</a>、<a class=link href=https://docs.oracle.com/javase/jp/8/docs/api/java/util/Collections.html#sort-java.util.List- target=_blank rel=noopener>Collections.sort()</a>、<a class=link href=https://docs.oracle.com/javase/jp/8/docs/api/java/util/Arrays.html#sort-int:A- target=_blank rel=noopener>Arrays.sort()</a>、[Stream.sorted()]など方法が色々あり、ソートしたいCollectionやArrayなどが<code>Immutable</code>であるかどうか、<code>Comparator</code>や<a class=link href=https://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html target=_blank rel=noopener>Comparable</a>を自前で実装するか、それともスタンダードライブラリに用意されてあるものを使うかなどのさまざまな選択肢も考慮する必要があるということですね。</p><p>色々な選択肢がある中で、もっとも簡単なのは、<code>Collections.sort()</code>や<code>Arrays.sort()</code>を使う方法かなと思います。これを使う場合、primitive型やStringのListは短いコードでソートができるという（そして標準機能という）メリットがありますね。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> var a <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> ArrayList<span style=color:#ff79c6>&lt;&gt;()</span> <span style=color:#ff79c6>{{</span> add<span style=color:#ff79c6>(</span>22<span style=color:#ff79c6>);</span> add <span style=color:#ff79c6>(</span>1<span style=color:#ff79c6>);</span> add<span style=color:#ff79c6>(</span>44<span style=color:#ff79c6>);</span> add<span style=color:#ff79c6>(</span>300<span style=color:#ff79c6>);</span> add<span style=color:#ff79c6>(</span>5000<span style=color:#ff79c6>);</span> <span style=color:#ff79c6>}};</span>
</span></span><span style=display:flex><span>a <span style=color:#ff79c6>==&gt;</span> <span style=color:#ff79c6>[</span>22<span style=color:#ff79c6>,</span> 1<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> Collections<span style=color:#ff79c6>.</span><span style=color:#50fa7b>sort</span><span style=color:#ff79c6>(</span>a<span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span>a<span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>1<span style=color:#ff79c6>,</span> 22<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>]</span>
</span></span></code></pre></div><p>次に、<code>List.sort()</code>が簡単です。<code>Comparator</code>を引数として渡す必要がありますが、昇順・降順でソートしたい場合は既に用意されてあるメソッドを呼び出すだけですね。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> var a <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> ArrayList<span style=color:#ff79c6>&lt;&gt;()</span> <span style=color:#ff79c6>{{</span> add<span style=color:#ff79c6>(</span>22<span style=color:#ff79c6>);</span> add <span style=color:#ff79c6>(</span>1<span style=color:#ff79c6>);</span> add<span style=color:#ff79c6>(</span>44<span style=color:#ff79c6>);</span> add<span style=color:#ff79c6>(</span>300<span style=color:#ff79c6>);</span> add<span style=color:#ff79c6>(</span>5000<span style=color:#ff79c6>);</span> <span style=color:#ff79c6>}};</span>
</span></span><span style=display:flex><span>a <span style=color:#ff79c6>==&gt;</span> <span style=color:#ff79c6>[</span>22<span style=color:#ff79c6>,</span> 1<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> a<span style=color:#ff79c6>.</span><span style=color:#50fa7b>sort</span><span style=color:#ff79c6>(</span>Comparator<span style=color:#ff79c6>.</span><span style=color:#50fa7b>naturalOrder</span><span style=color:#ff79c6>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span>a<span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>1<span style=color:#ff79c6>,</span> 22<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>]</span>
</span></span></code></pre></div><p>ちなみに<code>Comparator</code>で使える既定のソート方法は以下があります。</p><ul><li>昇順: <a class=link href=https://docs.oracle.com/javase/jp/8/docs/api/java/util/Comparator.html#naturalOrder-- target=_blank rel=noopener>naturalOrder()</a></li><li>降順: <a class=link href=https://docs.oracle.com/javase/jp/8/docs/api/java/util/Comparator.html#reverseOrder-- target=_blank rel=noopener>reverseOrder()</a></li><li>逆順: <a class=link href=https://docs.oracle.com/javase/jp/8/docs/api/java/util/Comparator.html#reversed-- target=_blank rel=noopener>reversed()</a></li></ul><p>また、<code>Comparator</code>は、<code>Collections.sort()</code>の引数としても使えます。なので、降順にソートしたい場合は以下のようなコードを使えます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> var a <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> ArrayList<span style=color:#ff79c6>&lt;&gt;()</span> <span style=color:#ff79c6>{{</span> add<span style=color:#ff79c6>(</span>22<span style=color:#ff79c6>);</span> add <span style=color:#ff79c6>(</span>1<span style=color:#ff79c6>);</span> add<span style=color:#ff79c6>(</span>44<span style=color:#ff79c6>);</span> add<span style=color:#ff79c6>(</span>300<span style=color:#ff79c6>);</span> add<span style=color:#ff79c6>(</span>5000<span style=color:#ff79c6>);</span> <span style=color:#ff79c6>}};</span>
</span></span><span style=display:flex><span>a <span style=color:#ff79c6>==&gt;</span> <span style=color:#ff79c6>[</span>22<span style=color:#ff79c6>,</span> 1<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> Collections<span style=color:#ff79c6>.</span><span style=color:#50fa7b>sort</span><span style=color:#ff79c6>(</span>a<span style=color:#ff79c6>,</span> Comparator<span style=color:#ff79c6>.</span><span style=color:#50fa7b>reverseOrder</span><span style=color:#ff79c6>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> System<span style=color:#ff79c6>.</span><span style=color:#50fa7b>out</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>println</span><span style=color:#ff79c6>(</span>a<span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>[</span>5000<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 22<span style=color:#ff79c6>,</span> 1<span style=color:#ff79c6>]</span>
</span></span></code></pre></div><p>他に、元のListの値を変更せず、新しくソートされた結果を取得したい場合は、元のListをコピーする方法もありますが、もう一つの方法として<code>Stream</code>を使う方法を考えられます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> var a <span style=color:#ff79c6>=</span> List<span style=color:#ff79c6>.</span><span style=color:#50fa7b>of</span><span style=color:#ff79c6>(</span>22<span style=color:#ff79c6>,</span> 1<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span>a <span style=color:#ff79c6>==&gt;</span> <span style=color:#ff79c6>[</span>22<span style=color:#ff79c6>,</span> 1<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> var b <span style=color:#ff79c6>=</span> a<span style=color:#ff79c6>.</span><span style=color:#50fa7b>stream</span><span style=color:#ff79c6>().</span><span style=color:#50fa7b>sorted</span><span style=color:#ff79c6>().</span><span style=color:#50fa7b>collect</span><span style=color:#ff79c6>(</span>Collectors<span style=color:#ff79c6>.</span><span style=color:#50fa7b>toList</span><span style=color:#ff79c6>());</span>
</span></span><span style=display:flex><span>b <span style=color:#ff79c6>==&gt;</span> <span style=color:#ff79c6>[</span>1<span style=color:#ff79c6>,</span> 22<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>]</span>
</span></span></code></pre></div><p><code>Stream</code>でソートする場合でも、<code>Comparator</code>を使えます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> var a <span style=color:#ff79c6>=</span> List<span style=color:#ff79c6>.</span><span style=color:#50fa7b>of</span><span style=color:#ff79c6>(</span>22<span style=color:#ff79c6>,</span> 1<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>);</span>
</span></span><span style=display:flex><span>a <span style=color:#ff79c6>==&gt;</span> <span style=color:#ff79c6>[</span>22<span style=color:#ff79c6>,</span> 1<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 5000<span style=color:#ff79c6>]</span>
</span></span><span style=display:flex><span>jshell<span style=color:#ff79c6>&gt;</span> var b <span style=color:#ff79c6>=</span> a<span style=color:#ff79c6>.</span><span style=color:#50fa7b>stream</span><span style=color:#ff79c6>().</span><span style=color:#50fa7b>sorted</span><span style=color:#ff79c6>(</span>Comparator<span style=color:#ff79c6>.</span><span style=color:#50fa7b>reverseOrder</span><span style=color:#ff79c6>()).</span><span style=color:#50fa7b>collect</span><span style=color:#ff79c6>(</span>Collectors<span style=color:#ff79c6>.</span><span style=color:#50fa7b>toList</span><span style=color:#ff79c6>());</span>
</span></span><span style=display:flex><span>b <span style=color:#ff79c6>==&gt;</span> <span style=color:#ff79c6>[</span>5000<span style=color:#ff79c6>,</span> 300<span style=color:#ff79c6>,</span> 44<span style=color:#ff79c6>,</span> 22<span style=color:#ff79c6>,</span> 1<span style=color:#ff79c6>]</span>
</span></span></code></pre></div><p>また、DTOのListをソートしたい場合は、DTOが<code>Comparable</code>を継承するという方法も考えられますが、多くの場合はソート時の条件が明確にわかる<code>Comparator</code>を実装したいいかなと思います。汎用性や柔軟性を考えても、<code>Comparable</code>の場合、条件が変わるとクラスを修正する必要があるので、<code>Comparator</code>を使った方が無難かなと思います。</p><p>Arrayの場合、<code>Arrays.sort()</code>を利用してソートできる（もちろん<code>Comparator</code>も使えます）上に、ListやStreamに変換することもできるので上記の方法をそのまま使えます。なので選択肢はもっと多いわけですが、便利な（好みに合う）方法を選ぶといいかなと思います。個人的には<code>Arrays.sort()</code>に<code>Comparator</code>を渡した方が可読性という面で良さそうな気がします。</p><h2 id=kotlin>Kotlin</h2><p>Sytax Sugarをたくさん提供しているKotlinらしく、選べるソートのオプションがたくさんあります。なので、少しまとめてみました。</p><div class=table-wrapper><table><thead><tr><th>Orderの種類</th><th>ソート結果</th><th>fun</th><th>備考</th></tr></thead><tbody><tr><td>Natural</td><td>呼び出し元</td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sort.html target=_blank rel=noopener>Array/MutableList.sort()</a></td><td>昇順</td></tr><tr><td></td><td></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sort-descending.html target=_blank rel=noopener>Array/MutableList.sortDescending()</a></td><td>降順</td></tr><tr><td></td><td></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/reverse.html target=_blank rel=noopener>Array/MutableList.reverse()</a></td><td>逆順</td></tr><tr><td></td><td>Array</td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-array.html target=_blank rel=noopener>Array.sortedArray()</a></td><td>昇順</td></tr><tr><td></td><td></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-array-descending.html target=_blank rel=noopener>Array.sortedArrayDescending()</a></td><td>降順</td></tr><tr><td></td><td></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/reversed-array.html target=_blank rel=noopener>Array.reveredArray()</a></td><td>逆順</td></tr><tr><td></td><td>List</td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted.html target=_blank rel=noopener>Array/List.sorted()</a></td><td>昇順</td></tr><tr><td></td><td></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-descending.html target=_blank rel=noopener>Array/List.sortedDescending()</a></td><td>降順</td></tr><tr><td></td><td></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/as-reversed.html target=_blank rel=noopener>List/MutableList.asRevered()</a></td><td>逆順</td></tr><tr><td>Custom</td><td>呼び出し元</td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sort-by.html target=_blank rel=noopener>Array/MutableList.sortBy()</a></td><td>昇順、selector((T) -> R)必要</td></tr><tr><td></td><td></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sort-by-descending.html target=_blank rel=noopener>Array/MutableList.sortByDescending()</a></td><td>降順、selector((T) -> R)必要</td></tr><tr><td></td><td>List</td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-by.html target=_blank rel=noopener>Array/Iterable.sortedBy()</a></td><td>昇順、selector((T) -> R)必要</td></tr><tr><td></td><td></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-by-descending.html target=_blank rel=noopener>Array/Iterable.sortedByDescending()</a></td><td>降順、selector((T) -> R)必要</td></tr><tr><td></td><td>Array</td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-array-with.html target=_blank rel=noopener>Array.sortedArrayWith()</a></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-comparator/ target=_blank rel=noopener>Comparator</a>必要</td></tr><tr><td></td><td>List</td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/sorted-with.html target=_blank rel=noopener>Array/Iterable.sortedWith()</a></td><td><a class=link href=https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-comparator/ target=_blank rel=noopener>Comparator</a>必要</td></tr></tbody></table></div><p>かなり多い選択肢があるように見えますが、こうやって表としてまとめてみるとまぁまぁわかりそうな気はします。自前の比較処理を書く必要があるか、ソートした結果が元の配列かどうか、そしてArrayになるかListになるかなどいくつかの基準で分けられるということが分かれば大体どれを使った方がいいか悩む必要はないかなと思います。</p><p>なので、まずやりたいことを明確にした上で、どのAPIを使うかを選んで書くだけです。以下はListから、ソートされた新しいListを作成する例です。それぞれ昇順と降順の場合となっています。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span>&gt;&gt;&gt; <span style=color:#ff79c6>val</span> a = listOf(<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>)
</span></span><span style=display:flex><span>&gt;&gt;&gt; <span style=color:#ff79c6>val</span> b = a.sorted()
</span></span><span style=display:flex><span>&gt;&gt;&gt; println(b)
</span></span><span style=display:flex><span><span style=color:#50fa7b>[1, 22, 44, 300, 5000]</span>
</span></span><span style=display:flex><span>&gt;&gt;&gt; <span style=color:#ff79c6>val</span> c = a.sortedDescending()
</span></span><span style=display:flex><span>&gt;&gt;&gt; println(c)
</span></span><span style=display:flex><span><span style=color:#50fa7b>[5000, 300, 44, 22, 1]</span>
</span></span></code></pre></div><p>また、data classの配列をソートしたい場合は<code>sortBy</code>や<code>sortedBy</code>を使えます。ここで引数に必要なのは<code>(T) -> R</code>型のselectorですが、単純にどれを基準にソートするかを指定すれば良いだけですので実装は簡単です。以下の例を見てください。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span>&gt;&gt;&gt; <span style=color:#ff79c6>data</span> <span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Data</span>(<span style=color:#ff79c6>val</span> number: Int)
</span></span><span style=display:flex><span>&gt;&gt;&gt; <span style=color:#ff79c6>val</span> a = listOf(Data(<span style=color:#bd93f9>22</span>), Data(<span style=color:#bd93f9>1</span>), Data(<span style=color:#bd93f9>44</span>), Data(<span style=color:#bd93f9>300</span>), Data(<span style=color:#bd93f9>5000</span>))
</span></span><span style=display:flex><span>&gt;&gt;&gt; <span style=color:#ff79c6>val</span> b = a.sortedBy { <span style=color:#ff79c6>it</span>.number }
</span></span><span style=display:flex><span>&gt;&gt;&gt; println(b)
</span></span><span style=display:flex><span><span style=color:#50fa7b>[Data(number=1), Data(number=22), Data(number=44), Data(number=300), Data(number=5000)]</span>
</span></span><span style=display:flex><span>&gt;&gt;&gt; <span style=color:#ff79c6>val</span> c = a.sortedByDescending { <span style=color:#ff79c6>it</span>.number }
</span></span><span style=display:flex><span>&gt;&gt;&gt; println(c)
</span></span><span style=display:flex><span><span style=color:#50fa7b>[Data(number=5000), Data(number=300), Data(number=44), Data(number=22), Data(number=1)]</span>
</span></span></code></pre></div><p>他にも、より複雑な比較の条件を指定したい場合はJavaの場合と同じく、<code>Comparator</code>を実装すると良いでしょう。やはりJavaと似ているようで、より単純化した（そしてそのせいで選択肢は増えた）感覚ですね。</p><h2 id=swift>Swift</h2><p>Swiftでは、シンプルに元のCollectionをソートするかソートされた新しいCollectionを作るかの選択肢しかないようです。あまり変わったことはないですが、元のCollectionをソートする場合は以下のようになります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>  <span style=color:#bd93f9>1</span>&gt; <span style=color:#8be9fd;font-style:italic>var</span> <span style=color:#8be9fd;font-style:italic>a</span> = [<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span><span style=display:flex><span>a: [<span style=color:#8be9fd;font-style:italic>Int</span>] = <span style=color:#bd93f9>5</span> values {
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>0</span>] = <span style=color:#bd93f9>22</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>1</span>] = <span style=color:#bd93f9>1</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>2</span>] = <span style=color:#bd93f9>44</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>3</span>] = <span style=color:#bd93f9>300</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>4</span>] = <span style=color:#bd93f9>5000</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>  <span style=color:#bd93f9>2</span>&gt; a.sort()
</span></span><span style=display:flex><span>  <span style=color:#bd93f9>3</span>&gt; print(a)
</span></span><span style=display:flex><span>[<span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span></code></pre></div><p>そして新しいCollectionを作成したい場合は以下のようになります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>  <span style=color:#bd93f9>1</span>&gt; <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>a</span> = [<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span><span style=display:flex><span>a: [<span style=color:#8be9fd;font-style:italic>Int</span>] = <span style=color:#bd93f9>5</span> values {
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>0</span>] = <span style=color:#bd93f9>22</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>1</span>] = <span style=color:#bd93f9>1</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>2</span>] = <span style=color:#bd93f9>44</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>3</span>] = <span style=color:#bd93f9>300</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>4</span>] = <span style=color:#bd93f9>5000</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>  <span style=color:#bd93f9>2</span>&gt; <span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>b</span> = a.sorted()
</span></span><span style=display:flex><span>b: [<span style=color:#8be9fd;font-style:italic>Int</span>] = <span style=color:#bd93f9>5</span> values {
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>0</span>] = <span style=color:#bd93f9>1</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>1</span>] = <span style=color:#bd93f9>22</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>2</span>] = <span style=color:#bd93f9>44</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>3</span>] = <span style=color:#bd93f9>300</span>
</span></span><span style=display:flex><span>  [<span style=color:#bd93f9>4</span>] = <span style=color:#bd93f9>5000</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>  <span style=color:#bd93f9>3</span>&gt; print(b)
</span></span><span style=display:flex><span>[<span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span></code></pre></div><p>ただ、Swiftのソートが独特なのはどうやってソートするか、その方法を指定する時です。<a class=link href=https://developer.apple.com/documentation/swift/array/2296801-sort target=_blank rel=noopener>sort()</a>でも<a class=link href=https://developer.apple.com/documentation/swift/array/2296815-sorted target=_blank rel=noopener>sorted()</a>でも引数として<code>areInIncreasingOrder</code>という関数を渡すことができるようになっていますが、JavaScriptやJava、Kotlinで使われていた<code>compareFunction</code>や<code>Comparator</code>の戻り値が数字であったことに対して、<code>areInIncreasingOrder</code>はpredicate型として戻り値がBoolになっています。なので以下のような形でソートの方法を指定可能です。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>students</span>: Set = [<span style=color:#f1fa8c>&#34;Kofi&#34;</span>, <span style=color:#f1fa8c>&#34;Abena&#34;</span>, <span style=color:#f1fa8c>&#34;Peter&#34;</span>, <span style=color:#f1fa8c>&#34;Kweku&#34;</span>, <span style=color:#f1fa8c>&#34;Akosua&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>descendingStudents</span> = students.sorted(by: <span style=color:#ff79c6>&gt;</span>)
</span></span><span style=display:flex><span>print(descendingStudents) <span style=color:#6272a4>// &#34;[&#34;Peter&#34;, &#34;Kweku&#34;, &#34;Kofi&#34;, &#34;Akosua&#34;, &#34;Abena&#34;]&#34;</span>
</span></span></code></pre></div><p>他に、classのフィールドを基準にソートしたい場合は以下の方法を使えます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>struct</span> <span style=color:#50fa7b>Data</span> { <span style=color:#8be9fd;font-style:italic>var</span> <span style=color:#8be9fd;font-style:italic>number</span> = <span style=color:#bd93f9>0</span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>datas</span> = [Data(number: <span style=color:#bd93f9>1</span>), Data(number: <span style=color:#bd93f9>3</span>), Data(number: <span style=color:#bd93f9>4</span>), Data(number: <span style=color:#bd93f9>2</span>)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>let</span> <span style=color:#8be9fd;font-style:italic>descending</span> = datas.sorted { <span style=color:#8be9fd;font-style:italic>$0</span>.number <span style=color:#ff79c6>&gt;</span> <span style=color:#8be9fd;font-style:italic>$1</span>.number }
</span></span><span style=display:flex><span>dump(descending)
</span></span><span style=display:flex><span><span style=color:#6272a4>/**
</span></span></span><span style=display:flex><span><span style=color:#6272a4>  descending: [Data] = 4 values {
</span></span></span><span style=display:flex><span><span style=color:#6272a4>    [0] = {
</span></span></span><span style=display:flex><span><span style=color:#6272a4>      number = 4
</span></span></span><span style=display:flex><span><span style=color:#6272a4>    }
</span></span></span><span style=display:flex><span><span style=color:#6272a4>    [1] = {
</span></span></span><span style=display:flex><span><span style=color:#6272a4>      number = 3
</span></span></span><span style=display:flex><span><span style=color:#6272a4>    }
</span></span></span><span style=display:flex><span><span style=color:#6272a4>    [2] = {
</span></span></span><span style=display:flex><span><span style=color:#6272a4>      number = 2
</span></span></span><span style=display:flex><span><span style=color:#6272a4>    }
</span></span></span><span style=display:flex><span><span style=color:#6272a4>    [3] = {
</span></span></span><span style=display:flex><span><span style=color:#6272a4>      number = 1
</span></span></span><span style=display:flex><span><span style=color:#6272a4>    }
</span></span></span><span style=display:flex><span><span style=color:#6272a4>  }
</span></span></span><span style=display:flex><span><span style=color:#6272a4>*/</span>
</span></span></code></pre></div><h2 id=go>Go</h2><p>Goにはジェネリックがないからか、<a class=link href=https://pkg.go.dev/sort target=_blank rel=noopener>sort</a>というパッケージに、sliceの種類によってソート用のfuncが色々と用意されています。例えば以下のようなものがあります。</p><ul><li>func Float64s(x []float64)</li><li>func Ints(x []int)</li><li>func Strings(x []string)</li></ul><p>なので、structのsliceではい場合はこれらの中でどれかを選んでソートすることになりますね。例えば以下のようになります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>a <span style=color:#ff79c6>:=</span> []<span style=color:#8be9fd>int</span>{<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>}
</span></span><span style=display:flex><span>sort.<span style=color:#50fa7b>Ints</span>(a)
</span></span><span style=display:flex><span>fmt.<span style=color:#50fa7b>Println</span>(a) <span style=color:#6272a4>// [1 22 44 300 5000]
</span></span></span></code></pre></div><p>structの場合は、以下のような方法が使えます。ソートの基準がまた<code>bool</code>になっています。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>people <span style=color:#ff79c6>:=</span> []<span style=color:#8be9fd;font-style:italic>struct</span> {
</span></span><span style=display:flex><span>  Name <span style=color:#8be9fd>string</span>
</span></span><span style=display:flex><span>  Age  <span style=color:#8be9fd>int</span>
</span></span><span style=display:flex><span>}{
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Gopher&#34;</span>, <span style=color:#bd93f9>7</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Alice&#34;</span>, <span style=color:#bd93f9>55</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Vera&#34;</span>, <span style=color:#bd93f9>24</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Bob&#34;</span>, <span style=color:#bd93f9>75</span>},
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>sort.<span style=color:#50fa7b>Slice</span>(people, <span style=color:#8be9fd;font-style:italic>func</span>(i, j <span style=color:#8be9fd>int</span>) <span style=color:#8be9fd>bool</span> { <span style=color:#ff79c6>return</span> people[i].Name &lt; people[j].Name })
</span></span><span style=display:flex><span>fmt.<span style=color:#50fa7b>Println</span>(people) <span style=color:#6272a4>// [{Alice 55} {Bob 75} {Gopher 7} {Vera 24}]
</span></span></span></code></pre></div><p>面白いのは、Goのソートには<a class=link href=https://pkg.go.dev/sort#SliceStable target=_blank rel=noopener>sort.SliceStable()</a>というものが別に存在しているということです。これは<a class=link href=https://ja.wikipedia.org/wiki/%E5%AE%89%E5%AE%9A%E3%82%BD%E3%83%BC%E3%83%88 target=_blank rel=noopener>安定ソート</a>を行うもので、その定義に関してはWikiでは以下のように述べています。</p><blockquote><p>同等なデータのソート前の順序が、ソート後も保存されるものをいう。つまり、ソート途中の各状態において、常に順位の位置関係を保っていることをいう。</p></blockquote><p>つまり、安定ソートの場合、ソートの基準となる値が同等の要素間の元の位置関係（インデックス）が保証されるということですね。その結果が実際どうなるのかを見てみましょう。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>people <span style=color:#ff79c6>:=</span> []<span style=color:#8be9fd;font-style:italic>struct</span> {
</span></span><span style=display:flex><span>  Name <span style=color:#8be9fd>string</span>
</span></span><span style=display:flex><span>  Age  <span style=color:#8be9fd>int</span>
</span></span><span style=display:flex><span>}{
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Alice&#34;</span>, <span style=color:#bd93f9>25</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Elizabeth&#34;</span>, <span style=color:#bd93f9>75</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Alice&#34;</span>, <span style=color:#bd93f9>75</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Bob&#34;</span>, <span style=color:#bd93f9>75</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Alice&#34;</span>, <span style=color:#bd93f9>75</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Bob&#34;</span>, <span style=color:#bd93f9>25</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Colin&#34;</span>, <span style=color:#bd93f9>25</span>},
</span></span><span style=display:flex><span>  {<span style=color:#f1fa8c>&#34;Elizabeth&#34;</span>, <span style=color:#bd93f9>25</span>},
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sort.<span style=color:#50fa7b>SliceStable</span>(people, <span style=color:#8be9fd;font-style:italic>func</span>(i, j <span style=color:#8be9fd>int</span>) <span style=color:#8be9fd>bool</span> { <span style=color:#ff79c6>return</span> people[i].Age &lt; people[j].Age })
</span></span><span style=display:flex><span>fmt.<span style=color:#50fa7b>Println</span>(people) <span style=color:#6272a4>// [{Alice 25} {Bob 25} {Colin 25} {Elizabeth 25} {Alice 75} {Alice 75} {Bob 75} {Elizabeth 75}]
</span></span></span></code></pre></div><p>コードの実行結果でわかるように、<code>Alice 25</code>、<code>Bob 25</code>、<code>Colin 25</code>、<code>Elizabeth 25</code>と<code>Alice 75</code>, <code>Bob 75</code>, <code>Elizabeth 75</code>の元の順が維持されたままソートされたのがわかります。ここでもし<code>sort.Slice()</code>を使うと以下のようになります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>sort.<span style=color:#50fa7b>Slice</span>(people, <span style=color:#8be9fd;font-style:italic>func</span>(i, j <span style=color:#8be9fd>int</span>) <span style=color:#8be9fd>bool</span> { <span style=color:#ff79c6>return</span> people[i].Name &lt; people[j].Name })
</span></span><span style=display:flex><span>fmt.<span style=color:#50fa7b>Println</span>(people) <span style=color:#6272a4>// [{Alice 25} {Alice 75} {Alice 75} {Bob 75} {Bob 25} {Colin 25} {Elizabeth 75} {Elizabeth 25}]
</span></span></span></code></pre></div><p>安定ソートはそうでないソートに比べ性能が劣る可能性が高いので（元のインデックスをまで考慮しているので）、一つの値を基準にソートしても問題ない場合は<code>sort.Slice()</code>でも十分な気がしますが、そうでない場合は安定ソートを考慮する必要がありそうですね。</p><h2 id=python>Python</h2><p>Pythonでは<a class=link href=https://docs.python.org/3/library/stdtypes.html#list.sort target=_blank rel=noopener>list.sort()</a>か、<a class=link href=https://docs.python.org/3/library/functions.html#sorted target=_blank rel=noopener>sorted()</a>を使えます。他の言語でも大体同じだったので命名だけでも推測が可能かと思いますが、前者は元のlistをソートするもので、後者は新しいlistを作り出すものです。</p><p>まず<code>list.sort()</code>は、以下のように使えます。他の言語とあまり変わらないですね。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>&gt;&gt;&gt;</span> a <span style=color:#ff79c6>=</span> [<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt;&gt;&gt;</span> a<span style=color:#ff79c6>.</span>sort()
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#8be9fd;font-style:italic>print</span>(a)
</span></span><span style=display:flex><span>[<span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span></code></pre></div><p>それに対して、<code>sorted()</code>は以下のように使えます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>&gt;&gt;&gt;</span> a <span style=color:#ff79c6>=</span> [<span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt;&gt;&gt;</span> b <span style=color:#ff79c6>=</span> <span style=color:#8be9fd;font-style:italic>sorted</span>(a)
</span></span><span style=display:flex><span><span style=color:#ff79c6>&gt;&gt;&gt;</span> <span style=color:#8be9fd;font-style:italic>print</span>(b)
</span></span><span style=display:flex><span>[<span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>22</span>, <span style=color:#bd93f9>44</span>, <span style=color:#bd93f9>300</span>, <span style=color:#bd93f9>5000</span>]
</span></span></code></pre></div><p>また、これらの関数では<code>key</code>や<code>reverse</code>のようなパラメータを指定することで、どれを基準にソートするか、逆順にソートするかなどを指定できます。Pythonらしいシンプルさですね。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#ff79c6>class</span> <span style=color:#50fa7b>Data</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>def</span> __init__(self, number):
</span></span><span style=display:flex><span>    self<span style=color:#ff79c6>.</span>number <span style=color:#ff79c6>=</span> number
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>def</span> __repr__(self):
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> <span style=color:#8be9fd;font-style:italic>repr</span>((self<span style=color:#ff79c6>.</span>number))
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>datas <span style=color:#ff79c6>=</span> [Data(<span style=color:#bd93f9>1</span>), Data(<span style=color:#bd93f9>3</span>), Data(<span style=color:#bd93f9>2</span>), Data(<span style=color:#bd93f9>4</span>)]
</span></span><span style=display:flex><span>datas<span style=color:#ff79c6>.</span>sort(key<span style=color:#ff79c6>=</span><span style=color:#ff79c6>lambda</span> data: data<span style=color:#ff79c6>.</span>number) <span style=color:#6272a4># [1, 2, 3, 4]</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>sorted</span>(datas, key<span style=color:#ff79c6>=</span><span style=color:#ff79c6>lambda</span> data: data<span style=color:#ff79c6>.</span>number, reverse<span style=color:#ff79c6>=</span><span style=color:#ff79c6>True</span>) <span style=color:#6272a4># [4, 3, 2, 1]</span>
</span></span></code></pre></div><h2 id=番外stable-sort>番外：Stable sort</h2><p>Goのソート方法の中で少し安定ソートの話が出ましたが、ここで比較した他の言語だとGoのように安定ソートとそうでないソートのどれを使うかという選択肢がなかったので、それぞれの言語での安定ソートはどうやって扱われているのかを表にしてみました。以下をご覧ください。</p><div class=table-wrapper><table><thead><tr><th>言語</th><th>stable</th><th>non-stable</th><th>備考</th></tr></thead><tbody><tr><td>Go</td><td>⭕️</td><td>⭕️</td><td>funcによって選べられる</td></tr><tr><td>Java</td><td>⭕️</td><td>⭕️</td><td>Streamはnon-stable</td></tr><tr><td>JavaScript</td><td>⭕️</td><td>⭕️</td><td>ブラウザのバージョンによる</td></tr><tr><td>Python</td><td>⭕️</td><td>❌</td><td></td></tr><tr><td>Kotlin</td><td>⭕️</td><td>❌</td><td>SequenceでもStable</td></tr><tr><td>Swift</td><td>❌</td><td>⭕️</td><td><code>stableを保証できない</code>と表現</td></tr></tbody></table></div><p>多くの言語が安定ソートに対応していますが、少しづつ仕様が違う場合がありました。例えばJavaの場合、Streamによるソートは安定ソートではないため、安定ソートの結果を保証したい場合は既にソートされたCollectionを使うことをおすすめしています。Kotlinの場合はStreamに似たSequenceを使う場合でも、<code>stateful</code>なためか、安定ソートに対応していました。</p><p>また、JavaScriptの場合はブラウザのバージョンによって違いますが、最新のブラウザを使っている場合は大抵安定ソートに対応していました。ただ、JavaScirptを使った案件の場合はIEも対象ブラウザとして考慮される場合があるのですが、IEだと安定ソートに対応していないので確認が必要かなと思います。</p><p>Swiftの場合はまだソート時のデフォルト値をstableにするかどうかを検討している中で、APIとしてもGoのようにstableとそうでないものを分離するかどうかを検討しているらしいです。またどのアルゴリズムを使うかについて議論しているらしく、しばらくは安定ソートを期待できないかと思います。</p><p>KotlinとPythonはどの場合でも安定ソートとなるので、悩み事が一つ減るのが嬉しいですね。</p><h2 id=最後に>最後に</h2><p>今回は色々な言語のソートについて調べてみましたが、いかがでしたか。一度ソートしたデータはその後の要素に対するアクセスが早くなるので、チューニングの観点からは必要なものかと思います。そしてこうやって色々な言語のソートのAPIを調べてみると、その言語の設計思想や発展の過程のようなものが少し見えるようで面白く、勉強にもなりますね。個人的にはあまり意識してなかった安定ソートがかなり勉強になりました。</p><p>これからもこうやって色々な言語の使用やAPI、同じことをする場合の各言語による違いなどを比べてみたいと思います。時間と体力が十分であればの話ではありますが…！</p><p>では、また！</p></section><footer class=article-footer><section class=article-tags><a href=/tags/kotlin/>kotlin</a>
<a href=/tags/java/>java</a>
<a href=/tags/javascript/>javascript</a>
<a href=/tags/python/>python</a>
<a href=/tags/swift/>swift</a>
<a href=/tags/go/>go</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>Related contents</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/posts/kotlin-prospect/><div class=article-image><img src=/../../images/kotlin.jpg loading=lazy data-key data-hash=/../../images/kotlin.jpg></div><div class=article-details><h2 class=article-title>Kotlinのこれからを語る</h2></div></a></article><article class=has-image><a href=/posts/server-side-coroutine/><div class=article-image><img src=/../../images/magic.jpg loading=lazy data-key data-hash=/../../images/magic.jpg></div><div class=article-details><h2 class=article-title>BackendでCoroutineを使う</h2></div></a></article><article class=has-image><a href=/posts/rust-first-impression/><div class=article-image><img src=/../../images/rust.jpg loading=lazy data-key data-hash=/../../images/rust.jpg></div><div class=article-details><h2 class=article-title>Kotlinプログラマが見たRust</h2></div></a></article><article class=has-image><a href=/posts/jvm-to-go/><div class=article-image><img src=/../../images/go.jpg loading=lazy data-key data-hash=/../../images/go.jpg></div><div class=article-details><h2 class=article-title>JVM言語経験者がGoを触る時のハマりどころ</h2></div></a></article><article class=has-image><a href=/posts/go-first-impression/><div class=article-image><img src=/../../images/go.jpg loading=lazy data-key data-hash=/../../images/go.jpg></div><div class=article-details><h2 class=article-title>JavaプログラマーがみたGo</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2019 -
2023 Korean-man in Tokyo</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.7.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#javascript>JavaScript</a></li><li><a href=#java>Java</a></li><li><a href=#kotlin>Kotlin</a></li><li><a href=#swift>Swift</a></li><li><a href=#go>Go</a></li><li><a href=#python>Python</a></li><li><a href=#番外stable-sort>番外：Stable sort</a></li><li><a href=#最後に>最後に</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>