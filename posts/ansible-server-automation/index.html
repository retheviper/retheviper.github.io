<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="この度はAnsibleを少し、使ってみる機会がありました。Ansibleもまた一つの自動化ツールで、あらかじめタスクを指定することで複数の環"><title>Ansibleでサーバーを構築する</title>
<link rel=canonical href=https://retheviper.github.io/posts/ansible-server-automation/>
<link rel=stylesheet href=/scss/style.min.1b3ac667198cb83edcc9c45e606a6f4dd6910b8ada6b74d7fd988f1b2dfd0c7c.css><meta property="og:title" content="Ansibleでサーバーを構築する">
<meta property="og:description" content="この度はAnsibleを少し、使ってみる機会がありました。Ansibleもまた一つの自動化ツールで、あらかじめタスクを指定することで複数の環">
<meta property="og:url" content="https://retheviper.github.io/posts/ansible-server-automation/">
<meta property="og:site_name" content="Korean-man in Tokyo">
<meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:tag" content="ansible"><meta property="article:tag" content="yaml"><meta property="article:tag" content="linux"><meta property="article:published_time" content="2019-07-05T00:00:00+00:00"><meta property="article:modified_time" content="2019-07-05T00:00:00+00:00"><meta property="og:image" content="https://retheviper.github.io/images/ansible.jpg">
<meta name=twitter:title content="Ansibleでサーバーを構築する">
<meta name=twitter:description content="この度はAnsibleを少し、使ってみる機会がありました。Ansibleもまた一つの自動化ツールで、あらかじめタスクを指定することで複数の環"><meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://retheviper.github.io/images/ansible.jpg">
<link rel=apple-touch-icon sizes=57x57 href=/favicon/apple-icon-57x57.png>
<link rel=apple-touch-icon sizes=60x60 href=/favicon/apple-icon-60x60.png>
<link rel=apple-touch-icon sizes=72x72 href=/favicon/apple-icon-72x72.png>
<link rel=apple-touch-icon sizes=76x76 href=/favicon/apple-icon-76x76.png>
<link rel=apple-touch-icon sizes=114x114 href=/favicon/apple-icon-114x114.png>
<link rel=apple-touch-icon sizes=120x120 href=/favicon/apple-icon-120x120.png>
<link rel=apple-touch-icon sizes=144x144 href=/favicon/apple-icon-144x144.png>
<link rel=apple-touch-icon sizes=152x152 href=/favicon/apple-icon-152x152.png>
<link rel=apple-touch-icon sizes=180x180 href=/favicon/apple-icon-180x180.png>
<link rel=icon type=image/png sizes=192x192 href=/favicon/android-icon-192x192.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon/favicon-32x32.png>
<link rel=icon type=image/png sizes=96x96 href=/favicon/favicon-96x96.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon/favicon-16x16.png>
<link rel=manifest href=/favicon/manifest.json>
<meta name=msapplication-TileColor content="#ffffff">
<meta name=msapplication-TileImage content="/favicon/ms-icon-144x144.png">
<meta name=theme-color content="#ffffff">
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-139986442-1','auto'),ga('send','pageview'))</script>
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class="has-image main-article">
<header class=article-header>
<div class=article-image>
<a href=/posts/ansible-server-automation/>
<img src=/../../images/ansible.jpg loading=lazy alt="Featured image of post Ansibleでサーバーを構築する">
</a>
</div>
<div class=article-details>
<header class=article-category>
<a href=/categories/ansible/ style=background-color:#2a9d8f;color:#fff>
ansible
</a>
</header>
<h2 class=article-title>
<a href=/posts/ansible-server-automation/>Ansibleでサーバーを構築する</a>
</h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jul 05, 2019</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
7 minute read
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<p>この度は<a class=link href=https://www.ansible.com/ target=_blank rel=noopener>Ansible</a>を少し、使ってみる機会がありました。<code>Ansible</code>もまた一つの自動化ツールで、あらかじめタスクを指定することで複数の環境で適用できるという意味ではJenkinsと似たようなものでした。ただ違う点は、Jenkinsは主にデプロイとリリース、テストなどの自動化に特化しているのに対し、Ansibleはサーバーの自動構築にその目的があるということです。</p>
<p>つまり、Ansibleを使えば複数の環境を同じくセッティングできます。例えば私の経験した範囲では「開発」→「内結」→「外結」という流れになっていて、それぞれで使う環境が変わっていました。段階が変わるたびに同じくサーバーを構築するのは時間の無駄で、セッティングすべき項目が増えると人の手では様々な面でミスが起こり得るので、Ansibleで自動化したいというのが今回のタスク。</p>
<p>ちょっと調べてみると、Ansibleでは<code>Playbook</code>と呼ばれるYAMLファイル<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>を使ってサーバーの設定を行います。深く入るとより複雑な動きもできるようですが、基本は接続先の情報(hostsファイル)とセッティングの値を保存したYAMLで起動します。できることはフォルダーやユーザーの作成、<code>yum</code>によるプログラムのインストール、シェルコマンド実行、ファイル転送などができて、うまく設定ができたら複数のサーバーを分散して使う時などに有効活用できそうな印象でした。</p>
<p>ただYAMLファイルとフォルダー構成などが少し複雑なので、ここでは一つ一つのファイルの設定を述べてみようと思います。以下のYAML設定は、AMAZON Linuxを基準に書かれています。</p>
<h2 id=ansibleのインストール>Ansibleのインストール</h2>
<p>Ansibleは<code>yum</code>、<code>brew</code>、<code>pip</code>、<code>apt-get</code>でインストールできます。簡単ですね！ただ場合によってはPython2やPIPが必要となるので、事前にインストールしておきましょう。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ yum install ansible
$ brew install ansible
$ pip install ansible
$ sudo apt-get install ansible
</code></pre></div><p>使っている環境に適した方法でインストールしましょう。</p>
<h2 id=batchserveryml>batchserver.yml</h2>
<p>まずはサーバーごとのYAMLファイルを生成します。Ansible実行時に使われるのはこっちで、どのサーバーでどんな動作をするかを記述します。サーバーごとにしたいことに関しては別のYAMLファイルを用意し、共通、バッチサーバー、WEBAPサーバー用のYAMLファイルをそれぞれ作るというイメージです。</p>
<p>以下のコードは、バッチサーバーを想定した場合の例です。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>hosts</span><span class=p>:</span><span class=w> </span><span class=l>batchserver</span><span class=w>
</span><span class=w>  </span><span class=nt>become</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>  </span><span class=nt>roles</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=l>common</span><span class=w>
</span><span class=w>    </span>- <span class=l>batch</span><span class=w>
</span></code></pre></div><p><code>hosts</code>はhostsファイルに記述されたホストのことを意味します。ここで<code>batchserver</code>と書くと、Ansibleの実行時は自動的にhostsファイルからbatchserverというグルーブに属している全サーバーに接続し同じ動きをします。全グループに対して実行したい場合は<code>all</code>と書きましょう。</p>
<p>そして<code>become</code>を<code>true</code>に設定すると、接続先での全ての命令ががsudoとして実行されます。<code>roles</code>はサーバーで行う行動を指定したYAMLファイルのことを記述していて、私の場合はどんなサーバーでも共通的に実行したことを書いた<code>common</code>とバッチサーバーでだけ実行したい<code>batch</code>を区分しておいたので両方を書いています。</p>
<h2 id=hosts>hosts</h2>
<p>このファイルは上述した通り、Ansibleで自動設定を行いたい接続先のことを書きます。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text>[batchserver]
192.168.0.1 ansible_ssh_user=batchuser1
192.168.0.2 ansible_ssh_user=batchuser2

[webapserver]
192.168.10.1 ansible_ssh_user=webapuser1
192.168.10.2 ansible_ssh_user=webapuser2
</code></pre></div><p>基本はグルーブを指定して、ホストの情報を書いておくと自動的に分類されます。上に書いたYAMLファイルではまず<code>batchserver</code>だけを指定しているので実行時に<code>webapserver</code>のグループは無視されます。そして<code>ansible_ssh_user</code>はその名の通りAnsibleでSSH接続する時に使われるユーザー名を指定しています。もちろんこうしなくても実行時にユーザー名やパスワードを入れることもできます。</p>
<h2 id=roles--batch--tasks--mainyml>roles / batch / tasks / main.yml</h2>
<p>ここは<code>batchserver.yml</code>で指定した<code>roles</code>で、実際どんなことがしたいかを記述するYAMLファイルが入ります。<code>roles</code>は同盟のフォルダーの下に作っておいたものしか実行できませんので注意してください。</p>
<p>本格的にやりたいことを書くファイルなので、どんな行動が指定できるかまず参考にしてください。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Create user groups</span><span class=w>
</span><span class=w>    </span><span class=nt>group</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{ { item.group_name } }&#34;</span><span class=w> </span><span class=c># マークダウンの仕様のためスペースを入れているが、実際はスペースなし</span><span class=w>
</span><span class=w>      </span><span class=nt>gid</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{ { item.group_id } }&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>with_items</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- {<span class=w> </span><span class=nt>group_name: &#39;group01&#39;, group_id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;101&#39;</span><span class=w> </span>}<span class=w>
</span><span class=w>    </span>- {<span class=w> </span><span class=nt>group_name: &#39;group02&#39;, group_id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;201&#39;</span><span class=w> </span>}<span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Create users</span><span class=w>
</span><span class=w>    </span><span class=nt>user</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{ { item.user_name } }&#34;</span><span class=w>
</span><span class=w>      </span><span class=nt>password</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{ { item.user_passwd } }&#34;</span><span class=w>
</span><span class=w>      </span><span class=nt>uid</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{ { item.user_id } }&#34;</span><span class=w>
</span><span class=w>      </span><span class=nt>group</span><span class=p>:</span><span class=w>  </span><span class=s2>&#34;{ { item.user_group } }&#34;</span><span class=w>
</span><span class=w>      </span><span class=nt>shell</span><span class=p>:</span><span class=w> </span><span class=l>/bin/bash</span><span class=w>
</span><span class=w>    </span><span class=nt>with_items</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- {<span class=w> </span><span class=nt>user_name: &#39;user01&#39;, user_group: &#39;group01&#39;, user_id: &#39;101&#39;, user_passwd</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;user01&#39;</span><span class=w> </span>}<span class=w>
</span><span class=w>    </span>- {<span class=w> </span><span class=nt>user_name: &#39;user02&#39;, user_group: &#39;group02&#39;, user_id: &#39;201&#39;, user_passwd</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;user02&#39;</span><span class=w> </span>}<span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name </span><span class=p>:</span><span class=w> </span><span class=l>Create folders</span><span class=w>
</span><span class=w>    </span><span class=nt>file</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=l>path={ { item } }</span><span class=w>
</span><span class=w>      </span><span class=l>owner=user01</span><span class=w>
</span><span class=w>      </span><span class=l>group=user01</span><span class=w>
</span><span class=w>      </span><span class=l>mode=0755</span><span class=w>
</span><span class=w>      </span><span class=l>state=directory</span><span class=w>
</span><span class=w>    </span><span class=nt>with_items</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- <span class=l>/user01</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Package install by yum</span><span class=w>
</span><span class=w>    </span><span class=nt>yum</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{ { packages } }&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>vars</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>packages</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=l>python2-pip</span><span class=w>
</span><span class=w>        </span>- <span class=l>postgresql</span><span class=w>
</span><span class=w>        </span>- <span class=l>postgresql-devel</span><span class=w>
</span><span class=w> 
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upgrade pip by shell command</span><span class=w>
</span><span class=w>    </span><span class=nt>shell</span><span class=p>:</span><span class=w> </span><span class=l>bash -lc &#34;pip install --upgrade pip&#34;</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install python modules</span><span class=w>
</span><span class=w>    </span><span class=nt>pip</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;{ { item } }&#34;</span><span class=w>
</span><span class=w>      </span><span class=nt>executable</span><span class=p>:</span><span class=w> </span><span class=l>pip</span><span class=w>
</span><span class=w>    </span><span class=nt>with_items</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=l>cx_Oracle</span><span class=w>
</span><span class=w>      </span>- <span class=l>psycopg2</span><span class=w>
</span><span class=w>      </span>- <span class=l>boto3</span><span class=w>
</span><span class=w>      </span>- <span class=l>paramiko</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Copy files</span><span class=w>
</span><span class=w>    </span><span class=nt>copy</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=l>src= { { item.source } }</span><span class=w>
</span><span class=w>      </span><span class=l>dest= { { item.dest } }</span><span class=w>
</span><span class=w>      </span><span class=l>owner=root</span><span class=w>
</span><span class=w>      </span><span class=l>group=root</span><span class=w>
</span><span class=w>      </span><span class=l>mode=0755</span><span class=w>
</span><span class=w>    </span><span class=nt>with_items</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- {<span class=w> </span><span class=nt>source: etc/somefile.zip, dest</span><span class=p>:</span><span class=w> </span><span class=l>/etc/somefile.zip }</span><span class=w>
</span></code></pre></div><p>上から順番に、ユーザーグループ作成、ユーザー作成、フォルダー作成、<code>yum</code>でパッケージインストール、シェルコマンドの実行、ファイル転送となります。結局はSSH接続してシェルスクリプトを実行するようなものですね。でもYAMLファイルにより簡単に設定できるということが良いところではないかと思います。なんども繰り返して実行しても良いですしね。</p>
<p>ただSSH接続したあとはYAMLファイルの上から一行づつ読みコマンドを実行していくので、実行したいことの順番には気をつける必要があります。例えば当たり前なことなんですが、ユーザーグループを作成する前に特定のグループにユーザーを作成するとかはできないので注意してください。</p>
<h2 id=roles--batch--files>roles / batch / files</h2>
<p>このフォルダーには転送に使いたいファイルをおきます。例えば上の<code>main.yml</code>に書いた<code>etc/somfile.zip</code>を転送したい場合は、このフォルダーの配下に同じパスのファイルを置きます。もちろん複数のファイルを転送することも、それぞれ違うフォルダーに分けておくことも可能です。</p>
<h2 id=roles--common--tasks--mainyml>roles / common / tasks / main.yml</h2>
<p>このファイルはどんなサーバーでも共通的に実行したいコマンドを集めています。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upgrade all packages by yum</span><span class=w>
</span><span class=w>    </span><span class=nt>yum</span><span class=p>:</span><span class=w> </span><span class=l>name=* state=latest</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Install openjdk 11</span><span class=w>
</span><span class=w>    </span><span class=nt>shell</span><span class=p>:</span><span class=w> </span><span class=l>bash -lc &#34;amazon-linux-extras install java-openjdk11&#34;</span><span class=w>
</span><span class=w>
</span><span class=w>  </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Correct java version selected</span><span class=w>
</span><span class=w>    </span><span class=nt>alternatives</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>java</span><span class=w>
</span><span class=w>      </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/usr/lib/jvm/java-11-openjdk-11.0.2.7-0.amzn2.x86_64/bin/java</span><span class=w>
</span></code></pre></div><p>このファイルでやっていることは、<code>yum</code>による全パッケージのアップデートと、OpenJDKのインストールです。JDKをインストールするだけではサーバーでJava実行時の基本バージョンがOpenJDK11にならないのでAlternativeからJavaのバージョンを選択するところまで入れています。同じやり方でPython3をインストールしてAlternativeで基本実行のバージョンを指定するなどのこともできます。</p>
<p>ここまでくるとAnsibleによる基本設定は終わり。難しくないですね！(深く入れば難しくなりそうですが)</p>
<h2 id=実行する>実行する</h2>
<p>それではPlaybookが用意されたので実行します。以下のコマンドで実行できます。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1># 一般的な実行</span>
$ ansible-playbook server.yml -i hosts
<span class=c1># Dry runの場合(Playbookの文法チェック用)</span>
$ ansible-playbook server.yml -i hosts -C
<span class=c1># SSH接続ユーザー名を入れる場合</span>
$ ansible-playbook server.yml -i hosts -u hostuser
</code></pre></div><p>こちらも簡単ですね。実行時にSSH接続するユーザーのパスワードを要求される場合がありますが、これはあらかじめSSH接続するユーザーの公開鍵を登録しておくことで回避できます。<code>sudo</code>の場合は接続先で<code>visudo</code>から<code>NOPASSWD</code>を設定しておくと便利です。</p>
<h2 id=最後に>最後に</h2>
<p>どうでしたか。最近はなんでも自動化が進んでいて、JenkinsとAnsibleがあればサーバー構築から作成物のデプロイまで簡単にできる環境を構築できるので、ますます生産性が上がりそうな気がします。まだ手動でサーバーの構築をやっている方にはぜひ一度使ってみてくださいとオススメしたいですね。</p>
<p>それでは今回のポストはここで終わり。また会いましょう！</p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>データフォーマットの一種で、その構造がJSONとかなり似ています。ただJSONと比べてみるとよりマークアップ言語に近い感じですね。多少癖はあるものの、JSONよりは直観的な表現ができます。&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/ansible/>ansible</a>
<a href=/tags/yaml/>yaml</a>
<a href=/tags/linux/>linux</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
</article>
<aside class=related-contents--wrapper>
</aside>
<footer class=site-footer>
<section class=copyright>
&copy;
2019 -
2022 Korean-man in Tokyo
</section>
<section class=powerby>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.7.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#ansibleのインストール>Ansibleのインストール</a></li>
<li><a href=#batchserveryml>batchserver.yml</a></li>
<li><a href=#hosts>hosts</a></li>
<li><a href=#roles--batch--tasks--mainyml>roles / batch / tasks / main.yml</a></li>
<li><a href=#roles--batch--files>roles / batch / files</a></li>
<li><a href=#roles--common--tasks--mainyml>roles / common / tasks / main.yml</a></li>
<li><a href=#実行する>実行する</a></li>
<li><a href=#最後に>最後に</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>